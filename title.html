<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
    
		<title>visnar test 1</title>

		<!-- CSS -->
		<link rel="stylesheet" href="assets/visnar.css" />
	</head>

	<body>
		<audio id="music" loop></audio>
		<div id="bg"></div>
            <div id="title_img_container">
				<img id="title_img" src="#">
            </div>

            <div id="title_option_container">
				<div id="option">
					<button class="option_btn" id="startBtn">Start Game</button>
				</div>
			</div>
	    </div>
	</body>

	<script>
		const bga = document.getElementById("bg");
		const logo = document.getElementById("title_img");
		const startBtn = document.getElementById("startBtn");

		startBtn.addEventListener("click", startGame);

		async function loadTitleScreen() {
			scenePath = "scenes/title.json";
			const resp = await fetch(scenePath);
    		json = await resp.json();
	    	    		
    		bga.style.backgroundImage = "url('img_bg/" + json.scene.background + ".png')";
			logo.src = "img_bg/" + json.scene.logo + ".png";
			            
    		if(json.scene.music) { 
        		if(currentSong !== json.scene.music) {
            		currentSong = json.scene.music;
            		sceneMusic.src = "mus/" + json.scene.music + ".mp3";
            		sceneMusic.play();
        		}
    		}
		}

		function startGame() { 
			location.href = "game.html";
		}

		loadTitleScreen();

	</script>

	<script src="assets/game_settings.js"></script>

</html>